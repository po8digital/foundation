"use strict";
var $ = document.querySelector.bind(document)
  , $$ = document.querySelectorAll.bind(document);
Node.prototype.on = window.on = function(e, o) {
    this.addEventListener(e, o)
}
,
NodeList.prototype.__proto__ = Array.prototype,
NodeList.prototype.on = NodeList.prototype.addEventListener = function(e, o) {
    this.forEach(function(t) {
        t.on(e, o)
    })
}
;

var w = window.innerWidth
  , heroTitle = $(".home .hero__title")
  , heroRedButton = $(".home .hero__buttons .button--salmon")
  , heroBlueButton = $(".home .hero__buttons .button--blue")
  , homeHeader = $(".home .header__content");


try {
  var animHeroTl = new TimelineMax({paused:true, onComplete:loadInteractions});

  animHeroTl.to(homeHeader, 2, {autoAlpha: 1},0)
    .to(heroTitle, 2, {y: 0, autoAlpha:1},0)
    .to(heroRedButton, 2, {y: 0, autoAlpha:1},0)
    .to(heroBlueButton, 2, {y: 0, autoAlpha:1},0).play();

} catch (e) {
    console.log(e)
}

function loadInteractions(){
  jQuery('.home').addClass('animationsDone');
}

var texts = $(".animated-text__item")
  , animTextTl = new TimelineMax({
    repeat: -1,
    repeatDelay: .3,
    paused: !1
});
texts.forEach(function(e) {
    animTextTl.to(e, 1, {
        opacity: 1
    }).to(e, 1, {
        opacity: 0
    })
});
var controller = new ScrollMagic.Controller;
if (w > 768)
    var menuScene = new ScrollMagic.Scene({
        triggerElement: ".header",
        triggerHook: 0,
        offset: 400
    }).setClassToggle("#fixedMenu", "active").addTo(controller);
var glassesTween = new TweenMax.to("#glasses",4,{
    scale: 1.2,
    y: -10,
    x: -50,
    rotation: 8,
    transformOrigin: "center center"
})
  , glassesScene = new ScrollMagic.Scene({
    triggerElement: ".home .hero__title",
    triggerHook: 0
}).setTween(glassesTween).addTo(controller)
  , triangleTween = new TweenMax.fromTo("#triangle",4,{
    x: 165,
    y: -49,
    rotation: -10,
    transformOrigin: "center center"
},{
    y: 50,
    x: -50,
    rotation: 50,
    transformOrigin: "center center"
})
  , triangleScene = new ScrollMagic.Scene({
    triggerElement: ".home .hero__buttons",
    triggerHook: 0
}).setTween(triangleTween).addTo(controller)
  , twoColTween = (new TimelineMax).fromTo(".home-2cols__item:first", 2, {
    y: 100,
    opacity: 0
}, {
    y: 0,
    opacity: 1
}).fromTo(".home-2cols__item:last", 2, {
    y: 150,
    opacity: 0
}, {
    y: 0,
    opacity: 1
}, "-=1.5")
  , twoColScene = new ScrollMagic.Scene({
    triggerElement: ".home-2cols",
    triggerHook: 1,
    offset: 100
}).setTween(twoColTween).addTo(controller)
  , asteroidTween = (new TimelineMax).fromTo(".asteroid", 2, {
    x: -120,
    y: 120,
    scale: .9
}, {
    x: 0,
    y: 0,
    scale: 1
}).fromTo(".home-asteroid__text", 2, {
    opacity: 0,
    y: 150
}, {
    opacity: 1,
    y: 0
}, "-=1.5");
if (w >= 1200 && w <= 1440)
    var asteroidScene = new ScrollMagic.Scene({
        triggerElement: ".asteroid",
        triggerHook: 1,
        offset: 200
    }).setTween(asteroidTween).addTo(controller);
var blueTween = new TweenMax.fromTo(".home-blue-section__content",2,{
    y: 200,
    opacity: 0
},{
    y: 100,
    opacity: 1
})
  , blueScene = new ScrollMagic.Scene({
    triggerElement: ".home-blue-section__content",
    triggerHook: 1,
    offset: 100
}).setTween(blueTween).addTo(controller)
  , servicesTween = (new TimelineMax).fromTo(".home .featured-services__container", 2, {
    y: 50
}, {
    y: 0
})
  , servicesScene = new ScrollMagic.Scene({
    triggerElement: ".home .featured-services__container",
    triggerHook: 1,
    offset: 120
}).setTween(servicesTween).addTo(controller)
  , macBook = CSSRulePlugin.getRule(".home .resources:before")
  , macBookTween = new TweenMax.fromTo(macBook,2,{
    cssRule: {
        y: 100
    }
},{
    cssRule: {
        y: 0
    }
})
  , macBookScene = new ScrollMagic.Scene({
    triggerElement: ".home .resources",
    triggerHook: 1,
    offset: 200
}).setTween(macBookTween).addIndicators().addTo(controller);
